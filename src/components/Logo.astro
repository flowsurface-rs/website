---
interface Props {
  showWordmark?: boolean;
  class?: string;
  condensed?: boolean; // if true, tighter gap
  encased?: boolean; // if true, draw dark rounded background (for light mode contrast)
}
const {
  showWordmark = true,
  class: klass = "",
  condensed = false,
  encased = false,
} = Astro.props as Props;
---

<!-- Flowsurface mark: green candle + right-side volume profile (uniform row heights) incl. wick extremity rows. -->
<div
  class={`flex items-center ${condensed ? "gap-1.5" : "gap-2"} ${klass}`.trim()}
  aria-label="Flowsurface"
>
  <svg
    width="28"
    height="28"
    viewBox="0 0 64 64"
    role="img"
    aria-hidden={showWordmark ? "true" : "false"}
    class="shrink-0"
  >
    <title>Flowsurface</title>
    <desc>
      Bullish candle with seven uniform horizontal volume profile rows (top red-only, bottom green-only) to the right.
    </desc>

    {encased && (
      <rect x="1" y="1" width="62" height="62" rx="14" class="logo-bg" />
    )}

    <!-- Candle -->
    <rect x="20" y="10" width="2" height="44" rx="1" fill="#51CDA0" opacity="0.9" />
    <rect x="18" y="18" width="6" height="28" rx="2" fill="#51CDA0" />

    <!-- Volume profile rows -->
    <!-- Uniform: rowHeight = 4, gap = 2 => y positions: 12,18,24,30,36,42,48 -->
    <g>
      <!-- Row 1 (top wick, ask only) -->
      <rect x="26" y="12" width="12" height="4" rx="1" fill="#C0504D" />
      <!-- Row 2 -->
      <rect x="26" y="18" width="18" height="4" rx="1" fill="#C0504D" />
      <rect x="26" y="18" width="9" height="4" rx="1" fill="#51CDA0" />
      <!-- Row 3 -->
      <rect x="26" y="24" width="22" height="4" rx="1" fill="#C0504D" />
      <rect x="26" y="24" width="13" height="4" rx="1" fill="#51CDA0" />
      <!-- Row 4 (POC) -->
      <rect x="26" y="30" width="26" height="4" rx="1" fill="#C0504D" />
      <rect x="26" y="30" width="15" height="4" rx="1" fill="#51CDA0" />
      <!-- Row 5 -->
      <rect x="26" y="36" width="20" height="4" rx="1" fill="#C0504D" />
      <rect x="26" y="36" width="11" height="4" rx="1" fill="#51CDA0" />
      <!-- Row 6 -->
      <rect x="26" y="42" width="14" height="4" rx="1" fill="#C0504D" />
      <rect x="26" y="42" width="7" height="4" rx="1" fill="#51CDA0" />
      <!-- Row 7 (bottom wick, bid only) -->
      <rect x="26" y="48" width="13" height="4" rx="1" fill="#51CDA0" />
    </g>
  </svg>
  {showWordmark && (
    <span class="font-semibold tracking-[0.38em] uppercase text-sm md:text-base leading-none select-none opacity-85 logo-wordmark">
      Flowsurface
    </span>
  )}
</div>
<style>
  .logo-wordmark { letter-spacing: 0.38em; }
  @media (max-width: 480px) { .logo-wordmark { letter-spacing: 0.32em; } }
  .logo-bg { fill: #0e0d0d; }
  .light .logo-bg { fill: #0e0d0d; /* force dark for contrast */ }
</style>
